<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>ASBinder.as</title>
<link rel="stylesheet" type="text/css" href="../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptpackage">package</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">IEventDispatcher</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">system</span>.<span class="ActionScriptDefault_Text">ApplicationDomain</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">describeType</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">getQualifiedClassName</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">getQualifiedSuperclassName</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">binding</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">BindingUtils</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">binding</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">ChangeWatcher</span>;
    
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ASBinder</span>
    <span class="ActionScriptBracket/Brace">{</span>

        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">directivesByClassName</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">{}</span>;
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">directivesForClass</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">className</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ClassDirective</span>
        <span class="ActionScriptBracket/Brace">{</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">directives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ClassDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directivesByClassName</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">className</span><span class="ActionScriptBracket/Brace">]</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directives</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">directives</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Class</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ApplicationDomain</span>.<span class="ActionScriptDefault_Text">currentDomain</span>.<span class="ActionScriptDefault_Text">getDefinition</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">className</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">Class</span>;                
            <span class="ActionScriptDefault_Text">directives</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">ClassDirective</span><span class="ActionScriptBracket/Brace">()</span>;

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">baseClassName</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getQualifiedSuperclassName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">baseClassName</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> 
            <span class="ActionScriptBracket/Brace">{</span>
            
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">baseClassDirectives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ClassDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directivesForClass</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">baseClassName</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">bindDirectives</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">baseClassDirectives</span>.<span class="ActionScriptDefault_Text">bindDirectives</span>.<span class="ActionScriptDefault_Text">concat</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">handleEventDirectives</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">baseClassDirectives</span>.<span class="ActionScriptDefault_Text">handleEventDirectives</span>.<span class="ActionScriptDefault_Text">concat</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">des</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">utils</span>.<span class="ActionScriptDefault_Text">describeType</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ty</span><span class="ActionScriptBracket/Brace">)</span>;


            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XMLList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">des</span>.<span class="ActionScriptDefault_Text">factory</span>.<span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;Bind&quot;</span><span class="ActionScriptBracket/Brace">)</span>;                
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bindingDirective</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BindDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BindDirective</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">bindingDirective</span>.<span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;source&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptDefault_Text">bindingDirective</span>.<span class="ActionScriptDefault_Text">destination</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;destination&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptDefault_Text">bindingDirective</span>.<span class="ActionScriptDefault_Text">twoWay</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;direction&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;both&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">bindDirectives</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bindingDirective</span><span class="ActionScriptBracket/Brace">)</span>;                
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptDefault_Text">metadata</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">des</span>.<span class="ActionScriptDefault_Text">factory</span>.<span class="ActionScriptDefault_Text">method</span>.<span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;Bind&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">bindingDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">BindDirective</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">bindingDirective</span>.<span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;source&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptDefault_Text">bindingDirective</span>.<span class="ActionScriptDefault_Text">handler</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">()</span>.@<span class="ActionScriptDefault_Text">name</span>;

                <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">bindDirectives</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bindingDirective</span><span class="ActionScriptBracket/Brace">)</span>;                
            <span class="ActionScriptBracket/Brace">}</span>


            <span class="ActionScriptDefault_Text">metadata</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">des</span>.<span class="ActionScriptDefault_Text">factory</span>.<span class="ActionScriptDefault_Text">method</span>.<span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;HandleEvent&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">metadata</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handlerDirective</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">HandleEventDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">HandleEventDirective</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">handlerDirective</span>.<span class="ActionScriptDefault_Text">dispatcher</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;dispatcher&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptDefault_Text">handlerDirective</span>.<span class="ActionScriptDefault_Text">event</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">arg</span>.<span class="ActionScriptBracket/Brace">(</span>@<span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;event&quot;</span><span class="ActionScriptBracket/Brace">)</span>.@<span class="ActionScriptDefault_Text">value</span>;
                <span class="ActionScriptDefault_Text">handlerDirective</span>.<span class="ActionScriptDefault_Text">handler</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">metadata</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">parent</span><span class="ActionScriptBracket/Brace">()</span>.@<span class="ActionScriptDefault_Text">name</span>;
                
                <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">handleEventDirectives</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handlerDirective</span><span class="ActionScriptBracket/Brace">)</span>;                                
            <span class="ActionScriptBracket/Brace">}</span>

            
            <span class="ActionScriptDefault_Text">directivesByClassName</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">className</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directives</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">directives</span>;            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">directivesForObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ClassDirective</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">cname</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">getQualifiedClassName</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">directivesForClass</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">cname</span><span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptReserved">public</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">InitObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">directives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ClassDirective</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directivesForObject</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bindDirectives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">bindDirectives</span>;

            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">bindDirectives</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">createBinding</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">bindDirectives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">])</span>;                
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handlerDirectives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">directives</span>.<span class="ActionScriptDefault_Text">handleEventDirectives</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">i</span>; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">handlerDirectives</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">bindHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">handlerDirectives</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">])</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bind</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>,<span class="ActionScriptDefault_Text">destination</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">executeBinding</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">newValue</span><span class="ActionScriptOperator">:*</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>                    
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bindDest</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">target</span>;
                <span class="ActionScriptReserved">try</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">destObjects</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">destination</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;.&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">while</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">destObjects</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 1<span class="ActionScriptBracket/Brace">)</span> 
                    <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">bindDest</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bindDest</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">destObjects</span>.<span class="ActionScriptDefault_Text">shift</span><span class="ActionScriptBracket/Brace">()]</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">bindDest</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">destObjects</span>.<span class="ActionScriptDefault_Text">shift</span><span class="ActionScriptBracket/Brace">()]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">newValue</span>;            
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">catch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:*</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{}</span>
            <span class="ActionScriptBracket/Brace">}</span>;
            <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindSetter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">executeBinding</span>,<span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">source</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;.&quot;</span><span class="ActionScriptBracket/Brace">))</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">createBinding</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">directive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">BindDirective</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">destination</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">destination</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">bind</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">source</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">destination</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">twoWay</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">bind</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">destination</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">source</span><span class="ActionScriptBracket/Brace">)</span>;                
            <span class="ActionScriptBracket/Brace">}</span>

            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">handler</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">handler</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handlerFunc</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">target</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">handler</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindSetter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">handlerFunc</span>,<span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">source</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;.&quot;</span><span class="ActionScriptBracket/Brace">))</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>

        
        <span class="ActionScriptReserved">private</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">bindHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">target</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>,<span class="ActionScriptDefault_Text">directive</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">HandleEventDirective</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">watcher</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ChangeWatcher</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">assignHandler</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptfunction">function</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">IEventDispatcher</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
            <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptDefault_Text">value</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">event</span>,<span class="ActionScriptDefault_Text">target</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">handler</span><span class="ActionScriptBracket/Brace">])</span>;
                <span class="ActionScriptDefault_Text">watcher</span>.<span class="ActionScriptDefault_Text">unwatch</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">watcher</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">BindingUtils</span>.<span class="ActionScriptDefault_Text">bindSetter</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">assignHandler</span>,<span class="ActionScriptDefault_Text">target</span>,<span class="ActionScriptDefault_Text">directive</span>.<span class="ActionScriptDefault_Text">dispatcher</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;.&quot;</span><span class="ActionScriptBracket/Brace">))</span>;            
        <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptBracket/Brace">}</span>


<span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">ClassDirective</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bindDirectives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handleEventDirectives</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptBracket/Brace">[]</span>;
<span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">BindDirective</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">source</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">destination</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handler</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">twoWay</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
<span class="ActionScriptBracket/Brace">}</span>
<span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">HandleEventDirective</span>
<span class="ActionScriptBracket/Brace">{</span>
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dispatcher</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">event</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
    <span class="ActionScriptReserved">public</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">handler</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;    
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
